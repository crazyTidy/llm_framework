id: rag_workflow  # RAG 示例工作流（思考 -> 任务规划 -> RAG 检索 -> 总结）
nodes:
  - id: think  # 思考节点：对原始问题做抽象分析
    type: think
    config: {}
    inputs:
      question: "如何使用Python进行API开发？"  # 原始问题
  
  - id: task_planner  # 任务规划节点：将问题拆解为若干检索任务
    type: task_planner
    config:
      max_tasks: 3  # 最多拆分为 3 个任务
    inputs:
      question: $think.result  # 使用思考节点的输出作为规划输入
  
  - id: rag1  # 第一个 RAG 节点：执行第 1 个任务
    type: rag
    config: {}
    inputs:
      task: $task_planner.tasks[0]  # 取任务列表的第一个元素
  
  - id: rag2  # 第二个 RAG 节点
    type: rag
    config: {}
    inputs:
      task: $task_planner.tasks[1]
  
  - id: rag3  # 第三个 RAG 节点
    type: rag
    config: {}
    inputs:
      task: $task_planner.tasks[2]
  
  - id: summarize  # 总结节点：汇总所有 RAG 结果并回答原始问题
    type: summarize
    config: {}
    inputs:
      question: $think.question  # 直接使用最初的问题文本
      rag_results:  # 汇总三个 RAG 节点的结果
        - $rag1.result
        - $rag2.result
        - $rag3.result

connections:  # 声明节点之间的依赖关系
  - from: think
    to: task_planner
  - from: task_planner
    to: rag1
  - from: task_planner
    to: rag2
  - from: task_planner
    to: rag3
  - from: rag1
    to: summarize
  - from: rag2
    to: summarize
  - from: rag3
    to: summarize

